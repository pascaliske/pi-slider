/*
	* piSlider v1.0.5
	* http://pascal-iske.de/slider
	*
	* Copyright 2014: Pascal Iske
*/
(function(e,t,n){e.fn.piSlider=function(t){function y(n){if(t.loader){n.prepend(r);e(".loader").fadeIn(800).delay(100).fadeOut(800)}if(t.startImage){e(".images, .images img:eq("+d+")").fadeIn("400")}else{e(".images, .images img:eq("+h+")").fadeIn("400")}n.append(o);e(".controls").fadeIn(300);if(t.arrows){e(".controls").prepend(u.left).append(u.right)}if(t.progressBar){e(".controls").append(a);e(".progressbar").css("background-color",t.progressColor);if(t.progressPosition==="top"){e(".progressbar").css({top:"0"})}}if(t.pagination){e(".controls").append(l);e(".pagination").css({width:c*45,margin:parseInt(t.height,10)-20+"px auto 0"});for(var i=1;i<=c;i++){e(".pagination").append('<div class="pagination-item" data-slide="'+i+'"></div>')}e(".pagination-item[data-slide="+parseInt(d+1)+"]").addClass("active")}if(t.captions){e(".controls").append(f);if(t.startImage){e(".captionbar").append("<a href='"+x(d)+"'><span>"+S(d)+"</span></a>")}else{e(".captionbar").append("<a href='"+x(v)+"'><span>"+S(v)+"</span></a>")}}if(t.shadow){n.append(s);e(".shadow").delay(200).fadeIn(500)}e(n).attr("slide",parseInt(d+1));E()}function b(){jQuery.queue(e(".progressbar")[0],"fx",[]);e(".progressbar").stop()}function w(){e(".progressbar").delay(200).animate({width:"100%"},8e3,function(){e(".progressbar").delay(300).animate({height:"0"},200,function(){e(".progressbar").removeAttr("style");N()})});jQuery.queue(e(".progressbar")[0],"fx",function(){jQuery.dequeue(this)})}function E(){e(".captionbar").animate({height:"55px"},600,function(){e(".captionbar span").fadeIn(400,function(){e(".captionbar span").css({display:"block"})})});if(t.progressPosition==="top"){e(".progressbar").css({top:"0"})}e(".progressbar").css({"background-color":t.progressColor,width:0}).delay(200).animate({width:"100%"},8e3,function(){if(t.captions){e(".captionbar span").fadeOut(400,function(){e(".captionbar").animate({height:"0"},600,function(){if(t.backwards){C()}else{N()}});e(".progressbar").animate({height:"0"},200,function(){e(".progressbar").removeAttr("style")})})}else{e(".progressbar").delay(300).animate({height:"0"},200,function(){e(".progressbar").removeAttr("style");if(t.backwards){C()}else{N()}})}})}function S(t){if(e(".images img:eq("+t+")").attr("title")){return e(".images img:eq("+t+")").attr("title")}else{return""}}function x(t){if(e(".images img:eq("+t+")").attr("data-href")){return e(".images img:eq("+t+")").attr("data-href")}else{return""}}function T(r,i){e(".progressbar").css({"background-color":t.progressColor,width:0});if(t.effect==="fade"){e(".images img:eq("+r+")").fadeOut("800");e(".images img:eq("+i+")").delay(200).fadeIn("1600")}else if(t.effect==="slide"){var s=e(".images img:eq("+r+")").width();e(".images img").show();e(".images img:eq("+i+")").css({left:s});e(".images img:eq("+r+")").animate({left:"-"+s});e(".images img:eq("+i+")").animate({left:"0"})}if(t.pagination){e(".pagination-item").each(function(t,n){e(this).removeClass("active")});e(".pagination-item[data-slide="+parseInt(m+1)+"]").addClass("active")}n.removeAttr("slide").attr("slide",parseInt(m+1));E()}function N(){e(".progressbar").stop();if(t.captions){e(".captionbar span").fadeOut(400,function(){e(".captionbar").animate({height:"0"},600,function(){e(".captionbar a span").remove();if(v===p){m=h;T(v,m);v=h;m=m+1;e(".captionbar a").append("<span>"+S(v)+"</span>")}else{m=v+1;T(v,m);v=v+1;m=m+1;e(".captionbar a").append("<span>"+S(v)+"</span>")}});e(".progressbar").animate({height:"0"},200,function(){e(".progressbar").removeAttr("style").css({"background-color":t.progressColor,width:0})})})}else{e(".progressbar").animate({height:"0"},200,function(){e(".captionbar a span").remove();if(v===p){m=h;T(v,m);v=h;m=m+1;e(".captionbar a").append("<span>"+S(v)+"</span>")}else{m=v+1;T(v,m);v=v+1;m=m+1;e(".captionbar a").append("<span>"+S(v)+"</span>")}e(".progressbar").removeAttr("style").css({"background-color":t.progressColor,width:0})})}}function C(){e(".progressbar").stop();if(t.captions){e(".captionbar span").fadeOut(400,function(){e(".captionbar").animate({height:"0"},600,function(){e(".captionbar a span").remove();if(v===0){g=p;T(v,g);v=p;g=g-1;e(".captionbar a").append("<span>"+S(v)+"</span>")}else{T(v,g);v=v-1;g=g-1;e(".captionbar a").append("<span>"+S(v)+"</span>")}});e(".progressbar").animate({height:"0"},200,function(){e(".progressbar").removeAttr("style").css({"background-color":t.progressColor,width:0})})})}else{e(".progressbar").animate({height:"0"},200,function(){e(".captionbar a span").remove();if(v===0){g=p;T(v,g);v=p;g=g-1;e(".captionbar a").append("<span>"+S(v)+"</span>")}else{T(v,g);v=v-1;g=g-1;e(".captionbar a").append("<span>"+S(v)+"</span>")}e(".progressbar").removeAttr("style").css({"background-color":t.progressColor,width:0})})}}function k(n){n=parseInt(n-1);e(".progressbar").stop();if(t.captions){e(".captionbar span").fadeOut(400,function(){e(".captionbar").animate({height:"0"},600,function(){e(".captionbar a span").remove();m=n;T(v,m);v=n;m=m+1;e(".captionbar a").append("<span>"+S(v)+"</span>")});e(".progressbar").animate({height:"0"},200,function(){e(".progressbar").removeAttr("style").css({"background-color":t.progressColor,width:0})})})}else{e(".progressbar").animate({height:"0"},200,function(){e(".captionbar a span").remove();m=n;T(v,m);v=n;m=m+1;e(".captionbar a").append("<span>"+S(v)+"</span>");e(".progressbar").removeAttr("style").css({"background-color":t.progressColor,width:0})})}}var n=this;var t=e.extend({},e.fn.piSlider.defaults,t);var r='<div class="loader"></div>';var i=e("img",this).wrapAll('<div class="images"></div>;');var s='<div class="shadow"></div>';var o='<div class="controls" style="z-index:999"></div>';var u={left:'<div class="arrow left"></div>',right:'<div class="arrow right"></div>'};var a='<div class="progressbar"></div>';var f='<div class="captionbar"></div>';var l='<div class="pagination"></div>';var c=e(".images img").size();var h=0;var p=c-1;var d=t.startImage-1;var v=h;var m=v+1;var g=v-1;this.css({width:t.width,height:t.height,position:"relative",margin:"0 auto 150px","z-index":"100"});if(t.fullsize){t.shadow=false;this.css({width:"100%",height:"100%",margin:"0",padding:"0"});e("body, html").css({width:"100%",height:"100%",margin:"0",padding:"0"})}if(t.startImage){v=d}if(t.autoplay){y(n)}if(t.pauseOnHover){this.hover(function(){b()},function(){w()})}e(document).on("click",".left",function(){C()});e(document).on("click",".right",function(){N()});if(t.keyControlling){e(document).keyup(function(e){if(e.keyCode==37){e.preventDefault();C()}else if(e.keyCode==39){e.preventDefault();N()}else if(e.keyCode==32){if(!n.hasClass("paused")){n.addClass("paused");b()}else if(n.hasClass("paused")){n.removeClass("paused");w()}}})}e(document).on("click",".captionbar",function(){alert("Open link!");e(this).load()});e(document).on("click",".pagination-item",function(t){var n=e(this).attr("data-slide");k(n)});return{start:function(){y(n)},stop:function(){b()},pause:function(){b()},resume:function(){w()},nextSlide:function(){N()},prevSlide:function(){C()},"goto":function(e){k(e)}}};e.fn.piSlider.defaults={loader:true,autoplay:true,loop:true,backwards:false,effect:"fade",duration:"8000",keyControlling:true,pauseOnHover:false,shadow:false,fullsize:false,progressColor:"white",progressBar:true,progressPosition:"bottom",progressShadow:false,arrows:true,captions:false,pagination:true,startImage:1,width:"100%",height:"300px"}})(jQuery)
